{"version":3,"file":"simple-vue.esm.js","sources":["../src/runtime-core/component.ts","../src/runtime-core/runderer.ts","../src/runtime-core/vnode.ts","../src/runtime-core/createApp.ts"],"sourcesContent":["\nexport function createComponentInstance(vnode: any) {\n  const component = {\n    vnode,\n    type: vnode.type\n  }\n\n  return component\n}\n\nexport function setupComponent(instance: any) {\n  // TODO\n  // 初始化props\n  // 初始化slots\n\n  //\n  setupStatefulComponent(instance)\n}\n\nfunction setupStatefulComponent(instance: any) {\n\n  const { setup } = instance.vnode.type\n  if(setup) {\n    const setupResult = setup()\n    handlerSetupResult(instance, setupResult)\n  }\n}\n\nfunction handlerSetupResult(instance: any, setupResult: any) {\n  // 这里传过来的setupResult可能是个函数或对象\n\n  if(typeof setupResult === 'object') {\n    instance.setupState = setupResult\n  }\n\n  // TODO\n  // 如果是函数，则当成render函数渲染\n\n  finishComponentSetup(instance)\n}\n\nfunction finishComponentSetup(instance: any) {\n  const Component = instance.type\n\n  if(Component.render) {\n    instance.render = Component.render\n  }\n}\n\n","import { createComponentInstance, setupComponent } from \"./component\"\n\n// 将虚拟节点渲染到真实dom\nexport function render(vnode, container) {\n  // patch\n\n  path(vnode, container)\n}\n\nfunction path(vnode, container) {\n  // 处理组件\n\n  // 判断是否是 element\n  processComponent(vnode, container)\n}\n\nfunction processComponent(vnode: any, container: any) {\n\n  // 挂载组件\n  mountComponent(vnode, container)\n}\n\nfunction mountComponent(vnode: any, container: any) {\n  const instance = createComponentInstance(vnode)\n\n  setupComponent(instance)\n\n  setupRenderEffect(instance, container)\n}\n\nfunction setupRenderEffect(instance: any, container: any) {\n  const subTree = instance.render()\n\n  // vnode -> path\n  // vnode -> element -> mountElement\n  path(subTree, container)\n}\n\n","\n\nexport function createVNode(type, props?, children?) {\n  const vnode = {\n    type,\n    props,\n    children,\n  }\n\n  return vnode\n}","import { render } from \"./runderer\"\nimport { createVNode } from \"./vnode\"\n\n\nexport function createApp(rootComponent) {\n  return {\n    mount(domId: string) {\n      const rootContainer = document.querySelector(domId)\n      if (!rootContainer) {\n        throw new Error(`找不到指定的dom元素: ${domId}`)\n      }\n      // 先将根组件转化成虚拟节点\n      const vnode = createVNode(rootComponent)\n      // 渲染节点\n      render(vnode, rootContainer)\n    }\n  }\n}\n\n\n\n"],"names":[],"mappings":";;;;AACM,SAAU,uBAAuB,CAAC,KAAU,EAAA;AAChD,IAAA,MAAM,SAAS,GAAG;QAChB,KAAK;QACL,IAAI,EAAE,KAAK,CAAC,IAAI;KACjB,CAAA;AAED,IAAA,OAAO,SAAS,CAAA;AAClB,CAAC;AAEK,SAAU,cAAc,CAAC,QAAa,EAAA;;;;;IAM1C,sBAAsB,CAAC,QAAQ,CAAC,CAAA;AAClC,CAAC;AAED,SAAS,sBAAsB,CAAC,QAAa,EAAA;IAE3C,MAAM,EAAE,KAAK,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAA;AACrC,IAAA,IAAG,KAAK,EAAE;AACR,QAAA,MAAM,WAAW,GAAG,KAAK,EAAE,CAAA;AAC3B,QAAA,kBAAkB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAA;AAC1C,KAAA;AACH,CAAC;AAED,SAAS,kBAAkB,CAAC,QAAa,EAAE,WAAgB,EAAA;;AAGzD,IAAA,IAAG,OAAO,WAAW,KAAK,QAAQ,EAAE;AAClC,QAAA,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAA;AAClC,KAAA;;;IAKD,oBAAoB,CAAC,QAAQ,CAAC,CAAA;AAChC,CAAC;AAED,SAAS,oBAAoB,CAAC,QAAa,EAAA;AACzC,IAAA,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;IAE/B,IAAG,SAAS,CAAC,MAAM,EAAE;AACnB,QAAA,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAA;AACnC,KAAA;AACH;;AC7CA;AACgB,SAAA,MAAM,CAAC,KAAK,EAAE,SAAS,EAAA;;AAGrC,IAAA,IAAI,CAAC,KAAgB,CAAC,CAAA;AACxB,CAAC;AAED,SAAS,IAAI,CAAC,KAAK,EAAE,SAAS,EAAA;;;AAI5B,IAAA,gBAAgB,CAAC,KAAgB,CAAC,CAAA;AACpC,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAU,EAAE,SAAc,EAAA;;AAGlD,IAAA,cAAc,CAAC,KAAgB,CAAC,CAAA;AAClC,CAAC;AAED,SAAS,cAAc,CAAC,KAAU,EAAE,SAAc,EAAA;AAChD,IAAA,MAAM,QAAQ,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAA;IAE/C,cAAc,CAAC,QAAQ,CAAC,CAAA;AAExB,IAAA,iBAAiB,CAAC,QAAmB,CAAC,CAAA;AACxC,CAAC;AAED,SAAS,iBAAiB,CAAC,QAAa,EAAE,SAAc,EAAA;AACtD,IAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAA;;;AAIjC,IAAA,IAAI,CAAC,OAAkB,CAAC,CAAA;AAC1B;;SClCgB,WAAW,CAAC,IAAI,EAAE,KAAM,EAAE,QAAS,EAAA;AACjD,IAAA,MAAM,KAAK,GAAG;QACZ,IAAI;QACJ,KAAK;QACL,QAAQ;KACT,CAAA;AAED,IAAA,OAAO,KAAK,CAAA;AACd;;ACNM,SAAU,SAAS,CAAC,aAAa,EAAA;IACrC,OAAO;AACL,QAAA,KAAK,CAAC,KAAa,EAAA;YACjB,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;YACnD,IAAI,CAAC,aAAa,EAAE;AAClB,gBAAA,MAAM,IAAI,KAAK,CAAC,gBAAgB,KAAK,CAAA,CAAE,CAAC,CAAA;AACzC,aAAA;;AAED,YAAA,MAAM,KAAK,GAAG,WAAW,CAAC,aAAa,CAAC,CAAA;;AAExC,YAAA,MAAM,CAAC,KAAoB,CAAC,CAAA;SAC7B;KACF,CAAA;AACH;;;;"}